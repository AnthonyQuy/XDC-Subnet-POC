version: '3.8'

services:
  frontend:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: networkmanager-frontend
    ports:
      - "3000:80"
    environment:
      - REACT_APP_DEFAULT_RPC_URL=http://192.168.25.11:8545
      - REACT_APP_DEFAULT_CONTRACT_ADDRESS=${CONTRACT_ADDRESS:-""}
    networks:
      - docker_net
    restart: unless-stopped
    volumes:
      - /app/node_modules
    # For development mode using the React development server instead of nginx
    # command: npm start
    # volumes:
    #   - .:/app
    #   - /app/node_modules

  # For local development without existing XDC network
  # Comment out if using with existing XDC subnet
  # xdc-node:
  #   image: xdc/client:latest
  #   container_name: xdc-dev-node
  #   ports:
  #     - "8545:8545"
  #   networks:
  #     docker_net:
  #       ipv4_address: 192.168.25.11
  #   volumes:
  #     - xdc-data:/root/.ethereum

networks:
  docker_net:
    external: true

# For local development without existing XDC network
# volumes:
#   xdc-data:
